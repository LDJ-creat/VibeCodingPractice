graph TD
    A[用户界面操作] --> B{业务逻辑处理}
    B --> C[数据持久化]
    C --> D[数据库]
    B --> E[其他模块]
    E --> B
    F[用户登录] --> G{权限验证}
    G --> H[功能访问]
```

**传智健康管理系统集成测试计划**

### I. UI 到数据库的交互测试

*   **检查项管理**
    *   [ ] **新增检查项**:
        *   在“检查项管理”界面，点击“新增”按钮。
        *   填写所有必填字段并提交。
        *   验证 UI 提示新增成功。
        *   在数据库 `checkitem` 表中查询，确认新增记录的字段值与 UI 输入一致。
    *   [ ] **编辑检查项**:
        *   在“检查项管理”界面，选择一个现有检查项，点击“编辑”按钮。
        *   修改部分字段并提交。
        *   验证 UI 提示编辑成功。
        *   在数据库 `checkitem` 表中查询，确认对应记录的字段值已更新。
    *   [ ] **删除检查项**:
        *   在“检查项管理”界面，选择一个现有检查项，点击“删除”按钮。
        *   确认删除操作。
        *   验证 UI 提示删除成功。
        *   在数据库 `checkitem` 表中查询，确认对应记录已被删除或标记为无效（如果采用软删除）。
*   **检查组管理**
    *   [ ] **新增检查组**:
        *   在“检查组管理”界面，点击“新增”按钮。
        *   填写检查组信息，并关联多个检查项。
        *   提交后，验证 UI 提示新增成功。
        *   在数据库 `checkgroup` 表中查询，确认新增记录。
        *   在数据库 `checkgroup_checkitem` 关联表中查询，确认检查组与检查项的关联关系正确。
    *   [ ] **编辑检查组**:
        *   在“检查组管理”界面，选择一个现有检查组，点击“编辑”按钮。
        *   修改检查组信息，并修改关联的检查项。
        *   提交后，验证 UI 提示编辑成功。
        *   在数据库 `checkgroup` 表中查询，确认检查组信息已更新。
        *   在数据库 `checkgroup_checkitem` 关联表中查询，确认关联关系已正确更新。
    *   [ ] **删除检查组**:
        *   在“检查组管理”界面，选择一个现有检查组，点击“删除”按钮。
        *   确认删除操作。
        *   验证 UI 提示删除成功。
        *   在数据库 `checkgroup` 表中查询，确认对应记录已被删除。
        *   在数据库 `checkgroup_checkitem` 关联表中查询，确认与该检查组相关的关联记录已被删除。
*   **用户预约**
    *   [ ] **用户预约体检**:
        *   以普通用户身份登录系统。
        *   在预约界面选择体检日期和检查组。
        *   提交预约。
        *   验证 UI 提示预约成功。
        *   在数据库 `appointment` 表中查询，确认新增了预约记录，且包含正确的用户ID、检查组ID和预约日期。
    *   [ ] **取消预约**:
        *   以普通用户身份登录系统。
        *   在“我的预约”或历史预约界面，选择一个待进行的预约，点击“取消”按钮。
        *   确认取消操作。
        *   验证 UI 提示取消成功。
        *   在数据库 `appointment` 表中查询，确认对应预约记录的状态已更新为“已取消”或已被删除。
*   **体检结果录入与查询**
    *   [ ] **录入体检结果**:
        *   以管理员身份登录系统。
        *   选择一个已完成的预约，进入体检结果录入界面。
        *   录入各项检查结果并提交。
        *   验证 UI 提示录入成功。
        *   在数据库 `exam_result` 表中查询，确认新增了体检结果记录，且与预约ID和检查项ID正确关联。
    *   [ ] **查询体检结果**:
        *   以普通用户身份登录系统。
        *   在“我的体检结果”界面，查询自己的体检结果。
        *   验证 UI 显示的体检结果与数据库 `exam_result` 表中的数据一致。

### II. 模块间依赖与数据流测试

*   **检查组与检查项关联**:
    *   [ ] **创建包含多个检查项的检查组**:
        *   通过 UI 创建一个检查组，并选择多个已存在的检查项进行关联。
        *   验证 `CheckgroupService` 的 `add` 方法能够正确处理检查组和检查项的关联逻辑。
        *   验证 `CheckgroupDao` 和 `CheckitemDao` 的数据操作正确性。
        *   验证 `checkgroup_checkitem` 关联表中的数据正确性。
    *   [ ] **编辑检查组的检查项关联**:
        *   通过 UI 编辑一个现有检查组，修改其关联的检查项。
        *   验证 `CheckgroupService` 的 `update` 方法能够正确更新检查组和检查项的关联逻辑。
        *   验证 `checkgroup_checkitem` 关联表中的数据正确性。
*   **用户预约与检查组选择**:
    *   [ ] **用户预约时选择检查组**:
        *   以普通用户身份登录，进入预约界面。
        *   验证检查组列表能够正确从 `CheckgroupService` 获取并显示。
        *   选择一个检查组进行预约，验证 `AppointmentService` 的 `createAppointment` 方法能够正确接收检查组ID并创建预约。
        *   验证 `AppointmentDao` 的数据操作正确性。
*   **体检结果与预约关联**:
    *   [ ] **体检结果录入与预约状态更新**:
        *   以管理员身份录入体检结果。
        *   验证 `ExamResultService` 的 `recordExamResults` 方法在录入结果后，能够正确更新 `Appointment` 表中对应预约的状态（例如，从“待体检”更新为“已完成”）。
        *   验证 `ExamResultDao` 和 `AppointmentDao` 的数据操作正确性。

### III. 权限流程测试

*   **用户登录与角色权限**:
    *   [ ] **普通用户登录**:
        *   使用普通用户账号（例如：`user/123456`）登录系统。
        *   验证登录成功后，系统跳转到 `UserMainView`。
        *   验证普通用户无法访问管理员专属的管理面板（如“检查项管理”、“检查组管理”）。
        *   验证普通用户只能看到“我的预约”和“我的体检结果”等功能。
    *   [ ] **管理员登录**:
        *   使用管理员账号（例如：`admin/admin`）登录系统。
        *   验证登录成功后，系统跳转到管理员主界面。
        *   验证管理员可以正常访问所有管理功能，包括“检查项管理”、“检查组管理”等。
    *   [ ] **无效凭证登录**:
        *   使用错误的用户名或密码尝试登录。
        *   验证系统提示登录失败，并停留在登录界面。
*   **功能访问权限**:
    *   [ ] **普通用户尝试访问管理员功能**:
        *   在普通用户登录状态下，尝试通过直接访问 URL 或其他方式（如果系统支持）访问管理员功能。
        *   验证系统拒绝访问并给出相应的权限提示。
    *   [ ] **管理员尝试访问普通用户功能**:
        *   在管理员登录状态下，尝试访问普通用户专属的功能（例如，如果普通用户有独立的预约历史页面，管理员尝试访问）。
        *   验证系统行为符合预期（例如，可以访问或提示无此功能）。